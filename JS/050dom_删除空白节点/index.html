<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script type="text/javascript">
			/*
				节点还包括：回车、换行、tab键、空格、字符
			*/
		   window.onload = function(){
			   var oDiv = document.getElementById("div1");
			   // alert(oDiv.childNodes.length); //5
			   
			   /*
					【问题】 如何将空白节点去除
					【注】 识别出空白节点。
					
					/^\s+$/.test()
					使用上面的正则去进行验证，如果是空白节点，返回true，
					否则返回false。
			   */
			  // alert(oDiv.childNodes[0].nodeType); //3
			  // var nodes = removeSpaceNode(oDiv.childNodes);
			  // alert(nodes[0].nodeType); // 1
			  // alert(nodes[0].nodeName); // EM
			  // alert(oDiv.childNodes.length); // 5
			  
			  /*
				第一种方法子节点并没有改变
				使用firstChild	lastChild 还是空白节点
				所有必须从父节点上删除空白节点
			  */
			 
			 removeSpaceNode2(oDiv);
			 alert(oDiv.firstChild.nodeName); //EM
			 alert(oDiv.childNodes[0].nodeName);//EM
			 alert(oDiv.childNodes.length);//3
			 
			 // [注] 删除数组元素的时候,必须倒序删除.
		   }
		   //删除空白节点
		   function removeSpaceNode(nodes){
			   var result = []; //用来存放不是空白节点的节点
			   for(var i = 0;i<nodes.length;i++){
				   //判断是否为空白节点
				   if(nodes[i].nodeType == 3 && /^\s+$/.test(nodes[i].nodeValue)){
					   continue;
				   }
				   result.push(nodes[i]);
			   }
			   return result;
		   }
		   
		   function removeSpaceNode2(parent){
			   var nodes = parent.childNodes;
			   for(var i = nodes.length-1;i>=0;i--){
				 if(nodes[i].nodeType == 3 && /^\s+$/.test(nodes[i].nodeValue)){
					 parent.removeChild(nodes[i]);
				 }  
			   }
		   }
		</script>
	</head>
	<body>
		<div id="div1">
			<em>斜体</em>
			文本内容
			<strong>粗体</strong>
			</div>
	</body>
</html>
